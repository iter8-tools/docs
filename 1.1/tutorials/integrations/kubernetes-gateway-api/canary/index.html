<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Iter8 is the Kubernetes release optimizer built for DevOps, MLOps, SRE and data science teams. Iter8 makes it easy to ensure that Kubernetes apps and ML models perform well and maximize business value."><meta name=author content="Srinivasan Parthasarathy"><link href=https://iter8.tools/latest/1.1/tutorials/integrations/kubernetes-gateway-api/canary/ rel=canonical><link href=../blue-green/ rel=prev><link href=../../kserve/blue-green/ rel=next><link rel=icon href=../../../../images/favicon.png><meta name=generator content="mkdocs-1.5.3, mkdocs-material-9.4.6"><title>Canary - Iter8</title><link rel=stylesheet href=../../../../assets/stylesheets/main.35e1ed30.min.css><link rel=stylesheet href=../../../../assets/stylesheets/palette.356b1318.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","UA-152813895-1"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","UA-152813895-1",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=UA-152813895-1",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><!-- Open graph meta tags --><meta property=og:type content=website><meta property=og:site_name content=Iter8><meta property=og:title content="Kubernetes Release Optimizer"><meta property=og:description content="Iter8 is the Kubernetes release optimizer built for DevOps, MLOps, SRE and data science teams. Iter8 makes it easy to ensure that Kubernetes apps and ML models perform well and maximize business value."><meta property=og:url content=https://iter8.tools><meta property=og:image content=https://iter8-tools.github.io/docs/0.9/images/iter8-intro-dark.png><!-- Extra stylesheets --><link rel=stylesheet href=../../../../stylesheets/main.css><!-- Place this tag in your head or just before your close body tag. --><script async defer src=https://buttons.github.io/buttons.js></script></head> <body dir=ltr data-md-color-scheme=primary data-md-color-primary=black data-md-color-accent=deep-orange> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#canary-release class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../../.. title=Iter8 class="md-header__button md-logo" aria-label=Iter8 data-md-component=logo> <img src=../../../../images/logo.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Iter8 </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Canary </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=primary data-md-color-primary=black data-md-color-accent=deep-orange aria-hidden=true type=radio name=__palette id=__palette_1> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/iter8-tools/iter8 title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> iter8-tools/iter8 </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../../../getting-started/first-release/ class=md-tabs__link> Getting Started </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../../../blue-green/ class=md-tabs__link> Tutorials </a> </li> <li class=md-tabs__item> <a href=../../../../user-guide/install/ class=md-tabs__link> User guide </a> </li> <li class=md-tabs__item> <a href=../../../../contributing/ class=md-tabs__link> Contributing </a> </li> <li class=md-tabs__item> <a href=../../../../roadmap/ class=md-tabs__link> Roadmap </a> </li> <li class=md-tabs__item> <a href=../../../../community/community/ class=md-tabs__link> Community </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../../.. title=Iter8 class="md-nav__button md-logo" aria-label=Iter8 data-md-component=logo> <img src=../../../../images/logo.svg alt=logo> </a> Iter8 </label> <div class=md-nav__source> <a href=https://github.com/iter8-tools/iter8 title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> iter8-tools/iter8 </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex> <span class=md-ellipsis> Getting Started </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../getting-started/first-release/ class=md-nav__link> <span class=md-ellipsis> Your first progressive release </span> </a> </li> <li class=md-nav__item> <a href=../../../../getting-started/first-abn/ class=md-nav__link> <span class=md-ellipsis> Your first A/B test </span> </a> </li> <li class=md-nav__item> <a href=../../../../getting-started/first-performance/ class=md-nav__link> <span class=md-ellipsis> Your first performance test </span> </a> </li> <li class=md-nav__item> <a href=../../../../getting-started/install/ class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class=md-nav__item> <a href=../../../../getting-started/concepts/ class=md-nav__link> <span class=md-ellipsis> Concepts </span> </a> </li> <li class=md-nav__item> <a href=../../../../getting-started/advantages/ class=md-nav__link> <span class=md-ellipsis> Advantages </span> </a> </li> <li class=md-nav__item> <a href=../../../../getting-started/help/ class=md-nav__link> <span class=md-ellipsis> Get help </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex> <span class=md-ellipsis> Tutorials </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1> <label class=md-nav__link for=__nav_3_1 id=__nav_3_1_label tabindex> <span class=md-ellipsis> Progressive release </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_1_label aria-expanded=false> <label class=md-nav__title for=__nav_3_1> <span class="md-nav__icon md-icon"></span> Progressive release </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../blue-green/ class=md-nav__link> <span class=md-ellipsis> Blue-green </span> </a> </li> <li class=md-nav__item> <a href=../../../canary/ class=md-nav__link> <span class=md-ellipsis> Canary </span> </a> </li> <li class=md-nav__item> <a href=../../../mirror/ class=md-nav__link> <span class=md-ellipsis> Mirrored </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../abn/ class=md-nav__link> <span class=md-ellipsis> A/B testing with Iter8 SDK </span> </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3> <label class=md-nav__link for=__nav_3_3 id=__nav_3_3_label tabindex> <span class=md-ellipsis> Performace testing </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> Performace testing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../performance/load-test-http/ class=md-nav__link> <span class=md-ellipsis> Single HTTP endpoint </span> </a> </li> <li class=md-nav__item> <a href=../../../performance/load-test-http-multiple/ class=md-nav__link> <span class=md-ellipsis> Multiple HTTP endpoints </span> </a> </li> <li class=md-nav__item> <a href=../../../performance/load-test-grpc/ class=md-nav__link> <span class=md-ellipsis> Single gRPC method </span> </a> </li> <li class=md-nav__item> <a href=../../../performance/load-test-grpc-multiple/ class=md-nav__link> <span class=md-ellipsis> Multiple gRPC methods </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4 checked> <label class=md-nav__link for=__nav_3_4 id=__nav_3_4_label tabindex> <span class=md-ellipsis> Integrations </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_4_label aria-expanded=true> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> Integrations </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4_1 checked> <label class=md-nav__link for=__nav_3_4_1 id=__nav_3_4_1_label tabindex=0> <span class=md-ellipsis> Kubernetes Gateway API </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_4_1_label aria-expanded=true> <label class=md-nav__title for=__nav_3_4_1> <span class="md-nav__icon md-icon"></span> Kubernetes Gateway API </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4_1_1 checked> <label class=md-nav__link for=__nav_3_4_1_1 id=__nav_3_4_1_1_label tabindex=0> <span class=md-ellipsis> Progressive release </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_4_1_1_label aria-expanded=true> <label class=md-nav__title for=__nav_3_4_1_1> <span class="md-nav__icon md-icon"></span> Progressive release </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../blue-green/ class=md-nav__link> <span class=md-ellipsis> Blue-green </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Canary </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Canary </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#install-the-iter8-controller class=md-nav__link> Install the Iter8 controller </a> </li> <li class=md-nav__item> <a href=#deploy-initial-version class=md-nav__link> Deploy initial version </a> <nav class=md-nav aria-label="Deploy initial version"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#verify-routing class=md-nav__link> Verify routing </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#deploy-candidate class=md-nav__link> Deploy candidate </a> <nav class=md-nav aria-label="Deploy candidate"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#verify-routing_1 class=md-nav__link> Verify routing </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#promote-candidate class=md-nav__link> Promote candidate </a> <nav class=md-nav aria-label="Promote candidate"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#verify-routing_2 class=md-nav__link> Verify routing </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#cleanup class=md-nav__link> Cleanup </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4_2> <label class=md-nav__link for=__nav_3_4_2 id=__nav_3_4_2_label tabindex=0> <span class=md-ellipsis> Kserve </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_4_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4_2> <span class="md-nav__icon md-icon"></span> Kserve </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4_2_1> <label class=md-nav__link for=__nav_3_4_2_1 id=__nav_3_4_2_1_label tabindex=0> <span class=md-ellipsis> Progressive release </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_4_2_1_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4_2_1> <span class="md-nav__icon md-icon"></span> Progressive release </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../kserve/blue-green/ class=md-nav__link> <span class=md-ellipsis> Blue-green </span> </a> </li> <li class=md-nav__item> <a href=../../kserve/canary/ class=md-nav__link> <span class=md-ellipsis> Canary </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4_2_2> <label class=md-nav__link for=__nav_3_4_2_2 id=__nav_3_4_2_2_label tabindex=0> <span class=md-ellipsis> A/B testing </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_4_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4_2_2> <span class="md-nav__icon md-icon"></span> A/B testing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../kserve/abn-http/ class=md-nav__link> <span class=md-ellipsis> Inference request by HTTP </span> </a> </li> <li class=md-nav__item> <a href=../../kserve/abn-grpc/ class=md-nav__link> <span class=md-ellipsis> Inference request by gRPC </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4_2_3> <label class=md-nav__link for=__nav_3_4_2_3 id=__nav_3_4_2_3_label tabindex=0> <span class=md-ellipsis> Performance testing </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_4_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4_2_3> <span class="md-nav__icon md-icon"></span> Performance testing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../kserve/http/ class=md-nav__link> <span class=md-ellipsis> Inference request by HTTP </span> </a> </li> <li class=md-nav__item> <a href=../../kserve/grpc/ class=md-nav__link> <span class=md-ellipsis> Inference request by gRPC </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4_3> <label class=md-nav__link for=__nav_3_4_3 id=__nav_3_4_3_label tabindex=0> <span class=md-ellipsis> Kserve (modelmesh) </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_4_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4_3> <span class="md-nav__icon md-icon"></span> Kserve (modelmesh) </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4_3_1> <label class=md-nav__link for=__nav_3_4_3_1 id=__nav_3_4_3_1_label tabindex=0> <span class=md-ellipsis> Progressive release </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_4_3_1_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4_3_1> <span class="md-nav__icon md-icon"></span> Progressive release </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../kserve-mm/blue-green/ class=md-nav__link> <span class=md-ellipsis> Blue-green </span> </a> </li> <li class=md-nav__item> <a href=../../kserve-mm/canary/ class=md-nav__link> <span class=md-ellipsis> Canary </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../kserve-mm/abn/ class=md-nav__link> <span class=md-ellipsis> A/B testing </span> </a> </li> <li class=md-nav__item> <a href=../../kserve-mm/performance/ class=md-nav__link> <span class=md-ellipsis> Performance testing </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../ghactions/ class=md-nav__link> <span class=md-ellipsis> GitHub Actions </span> </a> </li> <li class=md-nav__item> <a href=../../slack/ class=md-nav__link> <span class=md-ellipsis> Slack </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex> <span class=md-ellipsis> User guide </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> User guide </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_1> <label class=md-nav__link for=__nav_4_1 id=__nav_4_1_label tabindex> <span class=md-ellipsis> Topics </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_1_label aria-expanded=false> <label class=md-nav__title for=__nav_4_1> <span class="md-nav__icon md-icon"></span> Topics </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../user-guide/install/ class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class=md-nav__item> <a href=../../../../user-guide/uninstall/ class=md-nav__link> <span class=md-ellipsis> Uninstall </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_1_3> <label class=md-nav__link for=__nav_4_1_3 id=__nav_4_1_3_label tabindex=0> <span class=md-ellipsis> Progressive release </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_1_3_label aria-expanded=false> <label class=md-nav__title for=__nav_4_1_3> <span class="md-nav__icon md-icon"></span> Progressive release </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../user-guide/progressive-release/about/ class=md-nav__link> <span class=md-ellipsis> About </span> </a> </li> <li class=md-nav__item> <a href=../../../../user-guide/progressive-release/extension/ class=md-nav__link> <span class=md-ellipsis> Using new resource types </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_1_4> <label class=md-nav__link for=__nav_4_1_4 id=__nav_4_1_4_label tabindex=0> <span class=md-ellipsis> A/B/n testing </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_1_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4_1_4> <span class="md-nav__icon md-icon"></span> A/B/n testing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../user-guide/abn/about/ class=md-nav__link> <span class=md-ellipsis> About </span> </a> </li> <li class=md-nav__item> <a href=../../../../user-guide/abn/using-sdk/ class=md-nav__link> <span class=md-ellipsis> Using the SDK </span> </a> </li> <li class=md-nav__item> <a href=../../../../user-guide/abn/extension/ class=md-nav__link> <span class=md-ellipsis> Using new resource types </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_1_5> <label class=md-nav__link for=__nav_4_1_5 id=__nav_4_1_5_label tabindex=0> <span class=md-ellipsis> Performance testing </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_1_5_label aria-expanded=false> <label class=md-nav__title for=__nav_4_1_5> <span class="md-nav__icon md-icon"></span> Performance testing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../user-guide/performance/parameters/ class=md-nav__link> <span class=md-ellipsis> Parameters </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_1_5_2> <label class=md-nav__link for=__nav_4_1_5_2 id=__nav_4_1_5_2_label tabindex=0> <span class=md-ellipsis> Test Tasks </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_4_1_5_2_label aria-expanded=false> <label class=md-nav__title for=__nav_4_1_5_2> <span class="md-nav__icon md-icon"></span> Test Tasks </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../user-guide/performance/tasks/http/ class=md-nav__link> <span class=md-ellipsis> http </span> </a> </li> <li class=md-nav__item> <a href=../../../../user-guide/performance/tasks/grpc/ class=md-nav__link> <span class=md-ellipsis> grpc </span> </a> </li> <li class=md-nav__item> <a href=../../../../user-guide/performance/tasks/ready/ class=md-nav__link> <span class=md-ellipsis> ready </span> </a> </li> <li class=md-nav__item> <a href=../../../../user-guide/performance/tasks/github/ class=md-nav__link> <span class=md-ellipsis> github </span> </a> </li> <li class=md-nav__item> <a href=../../../../user-guide/performance/tasks/slack/ class=md-nav__link> <span class=md-ellipsis> slack </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../../user-guide/performance/extension/ class=md-nav__link> <span class=md-ellipsis> Using new resource types </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../../user-guide/routemap/ class=md-nav__link> <span class=md-ellipsis> Routemaps </span> </a> </li> <li class=md-nav__item> <a href=../../../../user-guide/metrics_store/ class=md-nav__link> <span class=md-ellipsis> Metrics store options </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../../contributing/ class=md-nav__link> <span class=md-ellipsis> Contributing </span> </a> </li> <li class=md-nav__item> <a href=../../../../roadmap/ class=md-nav__link> <span class=md-ellipsis> Roadmap </span> </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex> <span class=md-ellipsis> Community </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Community </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../community/community/ class=md-nav__link> <span class=md-ellipsis> Community </span> </a> </li> <li class=md-nav__item> <a href=../../../../community/news/ class=md-nav__link> <span class=md-ellipsis> News </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#install-the-iter8-controller class=md-nav__link> Install the Iter8 controller </a> </li> <li class=md-nav__item> <a href=#deploy-initial-version class=md-nav__link> Deploy initial version </a> <nav class=md-nav aria-label="Deploy initial version"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#verify-routing class=md-nav__link> Verify routing </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#deploy-candidate class=md-nav__link> Deploy candidate </a> <nav class=md-nav aria-label="Deploy candidate"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#verify-routing_1 class=md-nav__link> Verify routing </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#promote-candidate class=md-nav__link> Promote candidate </a> <nav class=md-nav aria-label="Promote candidate"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#verify-routing_2 class=md-nav__link> Verify routing </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#cleanup class=md-nav__link> Cleanup </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=canary-release>Canary release<a class=headerlink href=#canary-release title="Permanent link">&para;</a></h1> <p>This tutorial shows how Iter8 can be used to release a basic Kubernetes application using a canary release strategy. In a canary release, inference requests that match a particular pattern, for example those that have a particular header, are directed to the candidate version of the model. The remaining requests go to the primary, or initial, version of the model. The user declaratively describes the desired application state at any given moment. An Iter8 <code>release</code> chart assists users who describe the application state at any given moment. The chart provides the configuration needed for Iter8 to automatically deploy application versions and configure the routing to implement the canary release strategy.</p> <p><img alt="Canary release" src=../../../images/canary.png></p> <p>This tutorial uses the Kubernetes Gateway API to allow the use any service mesh that supports this API. In this case, we use demonstrate with <a href=https://linkerd.io/ >Linkerd</a>.</p> <details class=warning open=open> <summary>Before you begin</summary> <ol> <li>Ensure that you have a Kubernetes cluster and the <a href=https://kubernetes.io/docs/reference/kubectl/ ><code>kubectl</code></a> and <a href=https://helm.sh/ ><code>helm</code></a> CLIs. If using a local cluster (for example, <a href=https://kind.sigs.k8s.io/ >Kind</a> or <a href=https://minikube.sigs.k8s.io/docs/ >Minikube</a>), we recommend providing the cluster with at least 16GB of memory.</li> <li><a href=https://linkerd.io/2.14/getting-started/ >Install Linkerd</a>.</li> </ol> </details> <h2 id=install-the-iter8-controller>Install the Iter8 controller<a class=headerlink href=#install-the-iter8-controller title="Permanent link">&para;</a></h2> <p>Iter8 can be installed and configured to watch resources either in a single namespace (namespace-scoped) or in the whole cluster (cluster-scoped). </p> <div class="tabbed-set tabbed-alternate" data-tabs=1:2><input checked=checked id=__tabbed_1_1 name=__tabbed_1 type=radio><input id=__tabbed_1_2 name=__tabbed_1 type=radio><div class=tabbed-labels><label for=__tabbed_1_1>Namespace-scoped</label><label for=__tabbed_1_2>Cluster-scoped</label></div> <div class=tabbed-content> <div class=tabbed-block> <div class=highlight><pre><span></span><code>helm<span class=w> </span>install<span class=w> </span>--repo<span class=w> </span>https://iter8-tools.github.io/iter8<span class=w> </span>--version<span class=w> </span><span class=m>1</span>.1<span class=w> </span>iter8<span class=w> </span>controller
</code></pre></div> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code>helm<span class=w> </span>install<span class=w> </span>--repo<span class=w> </span>https://iter8-tools.github.io/iter8<span class=w> </span>--version<span class=w> </span><span class=m>1</span>.1<span class=w> </span>iter8<span class=w> </span>controller<span class=w> </span><span class=se>\</span>
--set<span class=w> </span><span class=nv>clusterScoped</span><span class=o>=</span><span class=nb>true</span>
</code></pre></div> </div> </div> </div> <p>For additional install options, see <a href=https://iter8.tools/1.1.0/user-guide/install/ >Iter8 Installation</a>.</p> <h2 id=deploy-initial-version>Deploy initial version<a class=headerlink href=#deploy-initial-version title="Permanent link">&para;</a></h2> <p>Deploy the initial version of the application (<a href=https://httpbin.org/ >httpbin</a>) using the Iter8 <code>release</code> chart by identifying the environment into which it should be deployed, a list of the versions to be deployed (only one here), and the release strategy to be used. Note that we deploy the application to the namespace <code>test</code>. </p> <details class=note open=open> <summary>About creating a namespace for Linkerd deployments</summary> <p>When creating a namespace, it should be annotated so that all created pods are injected with the Linkerd proxy. This can be done, for example, by using the Linkerd CLI: <div class=highlight><pre><span></span><code>kubectl<span class=w> </span>create<span class=w> </span>ns<span class=w> </span><span class=nb>test</span><span class=w> </span>--dry-run<span class=o>=</span>client<span class=w> </span>-o<span class=w> </span>yaml<span class=w> </span><span class=p>|</span><span class=w> </span>linkerd<span class=w> </span>inject<span class=w> </span>-<span class=w> </span><span class=p>|</span><span class=w> </span>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>-
</code></pre></div></p> </details> <div class=highlight><pre><span></span><code>cat<span class=w> </span><span class=s>&lt;&lt;EOF | helm -n test upgrade --install httpbin --repo https://iter8-tools.github.io/iter8 release --version 1.1 -f -</span>
<span class=s>environment: deployment-gtw</span>
<span class=s>application: </span>
<span class=s>  versions:</span>
<span class=s>  - metadata:</span>
<span class=s>      labels:</span>
<span class=s>        app.kubernetes.io/version: v0</span>
<span class=s>    image: kennethreitz/httpbin</span>
<span class=s>  strategy: canary</span>
<span class=s>EOF</span>
</code></pre></div> <details class=note> <summary>What happens?</summary> <p>The environment defines what kind of application is deployed. In this case (<code>deployment-gtw</code>), a <code>Deployment</code> and a <code>Service</code> object are created. - The namespace <code>default</code> is inherited from the Helm release namespace since it is not specified in the version or in <code>application.metadata</code>. - The name <code>httpbin-0</code> is derived from the Helm release name since it is not specified in the version or in <code>application.metadata</code>. The name is derived by appending the index of the version in the list of versions; <code>-0</code> in this case. - Alternatively, a <code>deploymentSpecification</code> and/or a <code>serviceSpecification</code> could have been specified.</p> <p>To support routing, a <code>Service</code> (<code>httpbin</code>) is deployed. The name is the Helm release name since it not specified in <code>application.metadata</code>. Further, an Iter8 <a href=../../../../user-guide/routemap/ >routemap</a> is created.</p> </details> <p>Once the application components are ready, the Iter8 controller automatically configures the routing by creating an <code>HTTPRoute</code>. It is configured to route all traffic to the only deployed version, <code>httpbin-0</code>.</p> <h3 id=verify-routing>Verify routing<a class=headerlink href=#verify-routing title="Permanent link">&para;</a></h3> <p>You can verify the routing configuration by inspecting the <code>HTTPRoute</code>:</p> <div class=highlight><pre><span></span><code>kubectl<span class=w> </span>-n<span class=w> </span><span class=nb>test</span><span class=w> </span>get<span class=w> </span>httproute.gateway.networking.k8s.io<span class=w> </span>httpbin<span class=w> </span>-o<span class=w> </span>yaml
</code></pre></div> <p>You can also send requests from a pod within the cluster:</p> <ol> <li> <p>Create a <code>sleep</code> pod in the cluster from which requests can be made: <div class=highlight><pre><span></span><code><span class=nb>export</span><span class=w> </span><span class=nv>SERVICE_MESH</span><span class=o>=</span>linkerd
curl<span class=w> </span>-s<span class=w> </span>https://raw.githubusercontent.com/iter8-tools/docs/v0.18.4/samples/kserve-serving/sleep.sh<span class=w> </span><span class=p>|</span><span class=w> </span>sh<span class=w> </span>-
</code></pre></div></p> </li> <li> <p>Exec into the sleep pod: <div class=highlight><pre><span></span><code>kubectl<span class=w> </span><span class=nb>exec</span><span class=w> </span>--stdin<span class=w> </span>--tty<span class=w> </span><span class=s2>&quot;</span><span class=k>$(</span>kubectl<span class=w> </span>get<span class=w> </span>pod<span class=w> </span>--sort-by<span class=o>={</span>metadata.creationTimestamp<span class=o>}</span><span class=w> </span>-l<span class=w> </span><span class=nv>app</span><span class=o>=</span>sleep<span class=w> </span>-o<span class=w> </span><span class=nv>jsonpath</span><span class=o>={</span>.items..metadata.name<span class=o>}</span><span class=w> </span><span class=p>|</span><span class=w> </span>rev<span class=w> </span><span class=p>|</span><span class=w> </span>cut<span class=w> </span>-d<span class=s1>&#39; &#39;</span><span class=w> </span>-f<span class=w> </span><span class=m>1</span><span class=w> </span><span class=p>|</span><span class=w> </span>rev<span class=k>)</span><span class=s2>&quot;</span><span class=w> </span>-c<span class=w> </span>sleep<span class=w> </span>--<span class=w> </span>/bin/sh
</code></pre></div></p> </li> <li> <p>To send requests without the header <code>traffic</code>: <div class=highlight><pre><span></span><code>curl<span class=w> </span>httpbin.test<span class=w> </span>-s<span class=w> </span>-D<span class=w> </span>-<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>-e<span class=w> </span><span class=s1>&#39;^HTTP&#39;</span><span class=w> </span>-e<span class=w> </span>app-version
</code></pre></div></p> </li> <li> <p>Requests can also be sent with the header <code>traffic: test</code>. When a candidate is deployed, requests with this header will be routed to the candidate. When no candidate is deployed, all requests will be routed to the primary version. <div class=highlight><pre><span></span><code>curl<span class=w> </span>httpbin.test<span class=w> </span>-H<span class=w> </span><span class=s1>&#39;traffic: test&#39;</span><span class=w> </span>-s<span class=w> </span>-D<span class=w> </span>-<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>-e<span class=w> </span><span class=s1>&#39;^HTTP&#39;</span><span class=w> </span>-e<span class=w> </span>app-version
</code></pre></div></p> </li> </ol> <p>The output includes the version of the application that responded (in the <code>app-version</code> response header). In this example:</p> <div class=highlight><pre><span></span><code>HTTP/1.1 200 OK
app-version: httpbin-0
</code></pre></div> <h2 id=deploy-candidate>Deploy candidate<a class=headerlink href=#deploy-candidate title="Permanent link">&para;</a></h2> <p>A candidate can deployed by simply adding a second version to the list of versions comprising the application:</p> <div class=highlight><pre><span></span><code>cat<span class=w> </span><span class=s>&lt;&lt;EOF | helm -n test upgrade --install httpbin --repo https://iter8-tools.github.io/iter8 release --version 1.1 -f -</span>
<span class=s>environment: deployment-gtw</span>
<span class=s>application: </span>
<span class=s>  versions:</span>
<span class=s>  - metadata:</span>
<span class=s>      labels:</span>
<span class=s>        app.kubernetes.io/version: v0</span>
<span class=s>    image: kennethreitz/httpbin</span>
<span class=s>  - metadata:</span>
<span class=s>      labels:</span>
<span class=s>        app.kubernetes.io/version: v1</span>
<span class=s>    image: kennethreitz/httpbin</span>
<span class=s>    matches:</span>
<span class=s>    - headers:</span>
<span class=s>      - name: traffic</span>
<span class=s>        value: test</span>
<span class=s>  strategy: canary</span>
<span class=s>EOF</span>
</code></pre></div> <details class=note> <summary>About the candidate version</summary> <p>In this tutorial, the candidate image is the same as the one for the primary version. In a real world example, it would be different. The version label (<code>app.kubernetes.io/version</code>) can be used to distinguish between versions.</p> </details> <p>When the second version is deployed and ready, the Iter8 controller automatically reconfigures the routing so that requests with the header <code>traffic</code> set to <code>test</code> will be sent to the candidate. All other requests will be sent to the primary version.</p> <h3 id=verify-routing_1>Verify routing<a class=headerlink href=#verify-routing_1 title="Permanent link">&para;</a></h3> <p>You can verify the routing configuration by inspecting the <code>HTTPRoute</code> and/or by sending requests as described above. Those with header <code>traffic</code> set to <code>test</code> will be handled by the candidate version:</p> <div class=highlight><pre><span></span><code>HTTP/1.1 200 OK
app-version: httpbin-1
</code></pre></div> <p>All others will be handled by the primary version:</p> <div class=highlight><pre><span></span><code>HTTP/1.1 200 OK
app-version: httpbin-0
</code></pre></div> <h2 id=promote-candidate>Promote candidate<a class=headerlink href=#promote-candidate title="Permanent link">&para;</a></h2> <p>The candidate can be promoted by redefining the primary version and removing the candidate:</p> <div class=highlight><pre><span></span><code>cat<span class=w> </span><span class=s>&lt;&lt;EOF | helm -n test upgrade --install httpbin --repo https://iter8-tools.github.io/iter8 release --version 1.1 -f -</span>
<span class=s>environment: deployment-gtw</span>
<span class=s>application: </span>
<span class=s>  versions:</span>
<span class=s>  - metadata:</span>
<span class=s>      labels:</span>
<span class=s>        app.kubernetes.io/version: v1</span>
<span class=s>    image: kennethreitz/httpbin</span>
<span class=s>  strategy: canary</span>
<span class=s>EOF</span>
</code></pre></div> <details class=note> <summary>What is different?</summary> <p>The version label (<code>app.kubernetes.io/version</code>) of the primary version was updated. In a real world example, the image would also have been updated (with that from the candidate version).</p> </details> <p>Once the (reconfigured) primary version ready, the Iter8 controller will automatically reconfigure the routing to send all requests to it.</p> <h3 id=verify-routing_2>Verify routing<a class=headerlink href=#verify-routing_2 title="Permanent link">&para;</a></h3> <p>You can verify the routing configuration by inspecting the <code>HTTPRoute</code> and/or by sending requests as described above. They will all be handled by the primary version. Output will be something like:</p> <div class=highlight><pre><span></span><code>HTTP/1.1 200 OK
app-version: httpbin-0
</code></pre></div> <h2 id=cleanup>Cleanup<a class=headerlink href=#cleanup title="Permanent link">&para;</a></h2> <p>Delete the application and its routing configuration:</p> <div class=highlight><pre><span></span><code>helm<span class=w> </span>-n<span class=w> </span><span class=nb>test</span><span class=w> </span>delete<span class=w> </span>httpbin
</code></pre></div> <p>If you used the <code>sleep</code> pod to generate load, remove it:</p> <div class=highlight><pre><span></span><code>kubectl<span class=w> </span>delete<span class=w> </span>deploy<span class=w> </span>sleep
</code></pre></div> <p>Uninstall Iter8 controller:</p> <div class=highlight><pre><span></span><code>helm<span class=w> </span>delete<span class=w> </span>iter8
</code></pre></div> <p>For additional uninstall options, see <a href=https://iter8.tools/1.1.0/user-guide/uninstall/ >Iter8 Uninstall</a>.</p> </article> </div> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Iter8 is open-source and available under the Apache 2 License. </div> </div> <div class=md-social> <a href=https://github.com/iter8-tools/iter8 target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://join.slack.com/t/iter8-tools/shared_invite/zt-awl2se8i-L0pZCpuHntpPejxzLicbmw target=_blank rel=noopener title=join.slack.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M94.12 315.1c0 25.9-21.16 47.06-47.06 47.06S0 341 0 315.1c0-25.9 21.16-47.06 47.06-47.06h47.06v47.06zm23.72 0c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06v117.84c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06V315.1zm47.06-188.98c-25.9 0-47.06-21.16-47.06-47.06S139 32 164.9 32s47.06 21.16 47.06 47.06v47.06H164.9zm0 23.72c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06H47.06C21.16 243.96 0 222.8 0 196.9s21.16-47.06 47.06-47.06H164.9zm188.98 47.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06h-47.06V196.9zm-23.72 0c0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06V79.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06V196.9zM283.1 385.88c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06v-47.06h47.06zm0-23.72c-25.9 0-47.06-21.16-47.06-47.06 0-25.9 21.16-47.06 47.06-47.06h117.84c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06H283.1z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../../..", "features": ["content.code.copy", "navigation.instant", "navigation.sections", "navigation.tabs", "navigation.top", "navigation.indexes"], "search": "../../../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script> <script src=../../../../assets/javascripts/bundle.aecac24b.min.js></script> </body> </html>